{"remainingRequest":"C:\\Users\\Efe-Dev\\Desktop\\vartur.com.fastify\\vue-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Efe-Dev\\Desktop\\vartur.com.fastify\\vue-ui\\src\\pages\\Categories.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Efe-Dev\\Desktop\\vartur.com.fastify\\vue-ui\\src\\pages\\Categories.vue","mtime":1690878092563},{"path":"C:\\Users\\Efe-Dev\\Desktop\\vartur.com.fastify\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1690342753077},{"path":"C:\\Users\\Efe-Dev\\Desktop\\vartur.com.fastify\\vue-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1690342753580},{"path":"C:\\Users\\Efe-Dev\\Desktop\\vartur.com.fastify\\vue-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1690342753077},{"path":"C:\\Users\\Efe-Dev\\Desktop\\vartur.com.fastify\\vue-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1690342762655}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMVGFibGUgZnJvbSAic3JjL2NvbXBvbmVudHMvVGFibGUudnVlIjsKaW1wb3J0IENhdGVnb3J5Rm9ybSBmcm9tICIuL1VzZXJQcm9maWxlL0NhdGVnb3J5Rm9ybS52dWUiOwppbXBvcnQgQ2F0ZWdvcnlMaW5rRm9ybSBmcm9tICIuL1VzZXJQcm9maWxlL0NhdGVnb3J5TGlua0Zvcm0udnVlIjsKaW1wb3J0IENhcmQgZnJvbSAic3JjL2NvbXBvbmVudHMvQ2FyZHMvQ2FyZC52dWUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTFRhYmxlLAogICAgQ2FyZCwKICAgIENhdGVnb3J5Rm9ybSwKICAgIENhdGVnb3J5TGlua0Zvcm0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFibGUxOiB7CiAgICAgICAgZGF0YTogW10sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0Q2F0ZWdvcmllcygpOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRmlsZVVwbG9hZChldmVudCkgewogICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgIH0sCiAgICBoYW5kbGVDYXRlZ29yeUNyZWF0ZWQoKSB7CiAgICAgIHRoaXMuZ2V0Q2F0ZWdvcmllcygpOwogICAgfSwKICAgIGFzeW5jIGdldENhdGVnb3JpZXMoKSB7CiAgICAgIGNvbnNvbGUubG9nKGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9VUkx9L2FwaS9jYXRlZ29yaWVzYCk7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoCiAgICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9jYXRlZ29yaWVzLyIKICAgICAgICApOwogICAgICAgIHRoaXMudGFibGUxLmRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKCJSZXN1bHQ6ICIsIHRoaXMudGFibGUxLmRhdGEpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJSZXN1bHQ6ICIsIGVycm9yKTsKICAgICAgfQoKICAgICAgLy8gdGhpcy5jYXRlZ29yeS5pbmZvID0gImFsZXJ0IGFsZXJ0LWluZm8gdGV4dC1kYXJrIjsKICAgICAgLy8gdGhpcy5jYXRlZ29yeS5tZXNzYWdlID0gIkNhdGVnb3J5IENyZWF0ZWQgU3VjY2Vzc2Z1bGx5ISI7CiAgICB9LAogICAgYXN5bmMgZGVsZXRlQ2F0ZWdvcnkoY2F0ZWdvcnlJZCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZGVsZXRlKAogICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvY2F0ZWdvcmllcy8ke2NhdGVnb3J5SWR9YAogICAgICAgICk7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PT0gIkNhdGVnb3J5IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5IikgewogICAgICAgICAgYXdhaXQgdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICJEZWxldGVkISIsCiAgICAgICAgICAgIHRleHQ6ICJUaGUgY2F0ZWdvcnkgaGFzIGJlZW4gZGVsZXRlZC4iLAogICAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICAgIHRpbWVyOiAxNTAwLAogICAgICAgICAgICB0aW1lclByb2dyZXNzQmFyOiB0cnVlLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZ2V0Q2F0ZWdvcmllcygpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBkZWxldGluZyBjYXRlZ29yeSIsIGVycm9yKTsKICAgICAgICBhd2FpdCB0aGlzLiRzd2FsLmZpcmUoewogICAgICAgICAgdGl0bGU6ICJFcnJvciIsCiAgICAgICAgICB0ZXh0OiAiRmFpbGVkIHRvIGRlbGV0ZSB0aGUgY2F0ZWdvcnkuIiwKICAgICAgICAgIGljb246ICJlcnJvciIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBjb25maXJtRGVsZXRlQ2F0ZWdvcnkoY2F0ZWdvcnlJZCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IGlzQ29uZmlybWVkID0gYXdhaXQgdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAiQXJlIHlvdSBzdXJlPyIsCiAgICAgICAgICB0ZXh0OiAiVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZSEiLAogICAgICAgICAgaWNvbjogIndhcm5pbmciLAogICAgICAgICAgc2hvd0NhbmNlbEJ1dHRvbjogdHJ1ZSwKICAgICAgICAgIGNvbmZpcm1CdXR0b25Db2xvcjogIiNkMzMiLAogICAgICAgICAgY2FuY2VsQnV0dG9uQ29sb3I6ICIjMzA4NWQ2IiwKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzLCBkZWxldGUgaXQhIiwKICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJDYW5jZWwiLAogICAgICAgIH0pOwoKICAgICAgICBpZiAoaXNDb25maXJtZWQuaXNDb25maXJtZWQpIHsKICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlQ2F0ZWdvcnkoY2F0ZWdvcnlJZCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGRlbGV0aW5nIGNhdGVnb3J5IiwgZXJyb3IpOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Categories.vue"],"names":[],"mappings":";AAmFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Categories.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div class=\"content\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-6\">\n          <card\n            class=\"strpied-tabled-with-hover\"\n            body-classes=\"table-full-width table-responsive\"\n          >\n            <template slot=\"header\">\n              <h4 class=\"card-title\">Parent Category</h4>\n              <p class=\"card-category\">Create New Category</p>\n            </template>\n            <div class=\"col-md-12\">\n              <category-form @category-created=\"handleCategoryCreated\">\n              </category-form>\n            </div>\n          </card>\n        </div>\n        <div class=\"col-6\">\n          <card\n            class=\"strpied-tabled-with-hover\"\n            body-classes=\"table-full-width table-responsive\"\n          >\n            <template slot=\"header\">\n              <h4 class=\"card-title\">Child Category</h4>\n              <p class=\"card-category\">Create New Category Links</p>\n            </template>\n            <div class=\"col-md-12\">\n              <category-link-form> </category-link-form>\n            </div>\n          </card>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <card\n            class=\"strpied-tabled-with-hover\"\n            body-classes=\"table-full-width table-responsive\"\n          >\n            <template slot=\"header\">\n              <h4 class=\"card-title\">Category Tree</h4>\n              <p class=\"card-category\">Categories, Parents & Product Count</p>\n            </template>\n            <table class=\"table\">\n              <thead>\n                <slot name=\"columns\">\n                  <tr>\n                    <th>Id</th>\n                    <th>Name</th>\n                    <th>Parent</th>\n                    <th>Picture</th>\n                    <th></th>\n                  </tr>\n                </slot>\n              </thead>\n              <tbody>\n                <tr v-for=\"(item, index) in table1.data\" :key=\"index\">\n                  <td>{{ index + 1 }}</td>\n                  <td>{{ item.name }}</td>\n                  <td>{{ item.parent_id }}</td>\n                  <td>{{ item.picture }}</td>\n                  <td>\n                    <button @click=\"confirmDeleteCategory(item.id)\">\n                      Delete\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <!-- <l-table\n              class=\"table-hover table-striped\"\n              :columns=\"table1.columns\"\n              :data=\"table1.data\"\n            >\n            </l-table> -->\n          </card>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport LTable from \"src/components/Table.vue\";\nimport CategoryForm from \"./UserProfile/CategoryForm.vue\";\nimport CategoryLinkForm from \"./UserProfile/CategoryLinkForm.vue\";\nimport Card from \"src/components/Cards/Card.vue\";\nimport axios from \"axios\";\nimport Swal from \"sweetalert2\";\n\nexport default {\n  components: {\n    LTable,\n    Card,\n    CategoryForm,\n    CategoryLinkForm,\n  },\n  data() {\n    return {\n      table1: {\n        data: [],\n      },\n    };\n  },\n  mounted() {\n    this.getCategories();\n  },\n  methods: {\n    handleFileUpload(event) {\n      this.selectedFile = event.target.files[0];\n    },\n    handleCategoryCreated() {\n      this.getCategories();\n    },\n    async getCategories() {\n      console.log(`${process.env.VUE_APP_BASE_URL}/api/categories`);\n      try {\n        const response = await axios.get(\n          \"http://localhost:3000/api/categories/\"\n        );\n        this.table1.data = response.data;\n        console.log(\"Result: \", this.table1.data);\n      } catch (error) {\n        console.log(\"Result: \", error);\n      }\n\n      // this.category.info = \"alert alert-info text-dark\";\n      // this.category.message = \"Category Created Successfully!\";\n    },\n    async deleteCategory(categoryId) {\n      try {\n        const response = await axios.delete(\n          `http://localhost:3000/api/categories/${categoryId}`\n        );\n        if (response.data.message === \"Category deleted successfully\") {\n          await this.$swal.fire({\n            title: \"Deleted!\",\n            text: \"The category has been deleted.\",\n            icon: \"success\",\n            timer: 1500,\n            timerProgressBar: true,\n            showConfirmButton: false,\n          });\n          this.getCategories();\n        }\n      } catch (error) {\n        console.error(\"Error deleting category\", error);\n        await this.$swal.fire({\n          title: \"Error\",\n          text: \"Failed to delete the category.\",\n          icon: \"error\",\n        });\n      }\n    },\n    async confirmDeleteCategory(categoryId) {\n      try {\n        const isConfirmed = await this.$swal.fire({\n          title: \"Are you sure?\",\n          text: \"This action cannot be undone!\",\n          icon: \"warning\",\n          showCancelButton: true,\n          confirmButtonColor: \"#d33\",\n          cancelButtonColor: \"#3085d6\",\n          confirmButtonText: \"Yes, delete it!\",\n          cancelButtonText: \"Cancel\",\n        });\n\n        if (isConfirmed.isConfirmed) {\n          await this.deleteCategory(categoryId);\n        }\n      } catch (error) {\n        console.error(\"Error deleting category\", error);\n      }\n    },\n  },\n};\n</script>\n<style></style>\n"]}]}